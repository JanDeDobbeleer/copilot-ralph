# Ralph

```
â €â €â €â €â €â €â£€â£¤â£¶â¡¶â¢›â Ÿâ¡¿â »â¢»â¢¿â¢¶â¢¦â£„â¡€â €â €â €â €â €â €â €â €â €â €
â €â €â €â¢€â£ â¡¾â¡«â¢Šâ Œâ¡â¢¡â Šâ¢°â â¡Žâ ˜â¡„â¢¢â ™â¡›â¡·â¢¤â¡€â €â €â €â €â €â €â €
â €â €â¢ â¢ªâ¢‹â¡žâ¢ â ƒâ¡œâ €â Žâ €â ‰â €â ƒâ €â ƒâ €â ƒâ ™â ˜â Šâ¢»â ¦â €â €â €â €â €â €
â €â €â¢‡â¡‡â¡œâ €â œâ €â â €â¢€â ”â ‰â ‰â ‘â „â €â €â¡°â Šâ ‰â ‘â¡„â¡‡â €â €â €â €â €â €
â €â €â¡¸â §â „â €â €â €â €â €â ˜â¡€â ¾â €â €â£¸â €â €â¢§â €â ›â €â Œâ¡‡â €â €â €â €â €â €
â €â ˜â¡‡â €â €â €â €â €â €â €â €â ™â ’â ’â šâ â ˆâ ‰â ²â¡â ’â ˆâ €â¡‡â €â €â €â €â €â €
â €â €â ˆâ ²â£†â €â €â €â €â €â €â €â €â£ â –â ‰â¡¹â ¤â ¶â â €â €â €â ˆâ¢¦â €â €â €â €â €
â €â €â €â €â ˆâ£¦â¡€â €â €â €â €â §â£´â â €â ˜â “â¢²â£„â£€â£€â£€â¡¤â ”â ƒâ €â €â €â €â €
â €â €â €â €â£œâ €â ˆâ “â ¦â¢„â£€â£€â£¸â €â €â €â €â â¢ˆâ¢‡â£¼â¡â €â €â €â €â €â €â €â €
â €â €â¢ â ’â ›â ²â£„â €â €â €â£ â â €â ‰â ²â£¤â €â¢¸â ‹â¢»â£¤â¡›â£„â €â €â €â €â €â €â €
â €â €â¢¡â €â €â €â €â ‰â¢²â ¾â â €â €â €â €â ˆâ¢³â¡¾â£¤â Ÿâ â ¹â£¿â¢†â €â €â €â €â €â €
â €â¢€â ¼â£†â €â €â €â €â €â €â €â €â €â €â €â €â£¼â ƒâ €â €â €â €â €â ˆâ£§â €â €â €â €â €
â €â¡â €â ˜â¢¦â¡€â €â €â €â €â €â €â €â €â£ â žâ â €â €â €â €â €â €â €â¢¸â£§â €â €â €â €
â¢°â£„â €â €â €â ‰â ³â ¦â£¤â£¤â¡¤â ´â –â ‹â â €â €â €â €â €â €â €â €â €â €â¢¯â£†â €â €â €
â¢¸â£‰â ‰â “â ²â¢¦â£¤â£„â£€â£€â €â €â €â €â €â €â €â €â €â €â¢€â£€â£€â£€â£ â£¼â¢¹â¡„â €â €
â ˜â¡â ™â ’â ¶â¢¤â£„â£ˆâ£‰â¡‰â ‰â ‰â ›â ›â ›â ›â ›â ›â¢»â ‰â ‰â ‰â¢™â£â£â£¸â ‡â¡‡â €â €
â €â¢£â €â €â €â €â €â €â ‰â ‰â ‰â ™â ›â ›â ›â ›â ›â ›â ›â ’â ’â ’â ‹â ‰â €â ¸â šâ¢‡â €â €
â €â €â¢§â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢ â ‡â¢¤â£¨â ‡â €
â €â €â €â¢§â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â£¤â¢»â¡€â£¸â €â €â €
â €â €â €â¢¸â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢¹â ›â ‰â â €â €â €
â €â €â €â¢¸â €â €â €â €â €â €â €â €â¢ â¢„â£€â£¤â ¤â ´â ’â €â €â €â €â¢¸â €â €â €â €â €â €
â €â €â €â¢¸â €â €â €â €â €â €â €â €â¡‡â €â €â¢¸â €â €â €â €â €â €â €â ˜â¡†â €â €â €â €â €
â €â €â €â¡Žâ €â €â €â €â €â €â €â €â¢·â €â €â¢¸â €â €â €â €â €â €â €â €â¡‡â €â €â €â €â €
â €â €â¢€â¡·â¢¤â£¤â£€â£€â£€â£€â£ â ¤â ¾â£¤â£€â¡˜â ›â ¶â ¶â ¶â ¶â –â ’â ‹â ™â “â ²â¢¤â£€â €
â €â €â ˜â §â£€â¡€â ˆâ ‰â ‰â â €â €â €â €â ˆâ ™â ³â£¤â£„â£€â£€â£€â €â €â €â €â €â¢€â£ˆâ¡‡
â €â €â €â €â €â ‰â ›â ²â ¤â ¤â¢¤â£¤â£„â£€â£€â£€â£€â¡¸â ‡â €â €â €â ‰â ‰â ‰â ‰â ‰â ‰â â €
```

Iterative AI Development Loop Tool

> Ralph implements the "Ralph Wiggum" technique for self-referential AI development loops using GitHub Copilot. It continuously feeds prompts to AI, monitoring for completion signals, with each iteration building on previous work until the task is done.

## Features

âœ¨ **Iterative AI Loops** - Run multiple AI iterations until task completion
âš™ï¸ **Flexible Configuration** - Configure loops via command-line flags
ðŸ¤– **GitHub Copilot Integration** - Powered by GitHub Copilot SDK
ðŸ”„ **Promise Detection** - Automatic completion signal recognition
ðŸ“Š **Real-time Event Streaming** - Watch iteration progress and tool execution
ðŸ› ï¸ **Tool Execution** - AI can read files, run commands, and make changes
â±ï¸ **Timeout & Iteration Controls** - Prevent runaway loops with safety limits

## Quick Start

### Installation

```bash
# From source (requires Go 1.22+)
go install github.com/JanDeDobbeleer/copilot-ralph/cmd/ralph@latest

# Or build from source
git clone https://github.com/JanDeDobbeleer/copilot-ralph.git
cd copilot-ralph
make build
```

### Usage

```bash
# Run an AI development loop
ralph run "Add unit tests for the parser module"

# With options
ralph run --max-iterations 5 --timeout 10m "Refactor authentication"

# Custom model and settings
ralph run \
  --model gpt-4-turbo \
  --promise "Task complete!" \
  --streaming=true \
  "Implement user authentication"
```

## How It Works

1. **Run** - Execute Ralph with your task prompt and options
2. **Iterate** - Ralph sends prompts to Copilot AI in iterations
3. **Execute** - AI uses tools to read files, run commands, make changes
4. **Monitor** - Watch progress in real-time
5. **Detect** - Ralph monitors for completion promise phrase
6. **Complete** - Loop ends when promise detected or max iterations reached

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Prompt    â”‚â”€â”€â”€â”€â”€>â”‚  AI Iterationâ”‚â”€â”€â”€â”€â”€>â”‚   Tools     â”‚
â”‚   + Context â”‚<â”€â”€â”€â”€â”€â”‚  (Copilot)   â”‚<â”€â”€â”€â”€â”€â”‚   Execute   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚                      â”‚
       â”‚                     â”‚ Promise?             â”‚
       â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚ Yes
       v                            v
  Next Iteration              ðŸŽ‰ Complete
```

## Commands

### `ralph run`

Run an AI development loop.

```bash
# Direct prompt
ralph run "Add comprehensive error handling"

# With flags
ralph run \
  --max-iterations 20 \
  --timeout 1h \
  --promise "Task complete" \
  --model gpt-4-turbo \
  --log-level debug \
  "Implement user authentication"

# Dry run (show what would happen)
ralph run --dry-run "Refactor database layer"

# With custom system message
ralph run \
  --system-message "You are an expert Go developer" \
  --system-message-mode replace \
  "Optimize the code"
```

Available flags:
- `--max-iterations, -m` - Maximum loop iterations (default: 10)
- `--timeout, -t` - Maximum loop runtime (default: 30m)
- `--promise` - Completion promise phrase (default: "I'm special!")
- `--model` - AI model to use (default: gpt-4)
- `--working-dir` - Working directory (default: current)
- `--log-level` - Log level: debug, info, warn, error (default: info)
- `--streaming` - Enable streaming responses (default: true)
- `--system-message` - Custom system message
- `--system-message-mode` - append or replace (default: append)
- `--dry-run` - Show configuration without running

### `ralph version`

Show version information.

```bash
ralph version
```

## Configuration

Ralph is configured entirely through command-line flags with sensible defaults. All settings can be customized per run:

- **Command-line flags** - All configuration via CLI flags
- **Default values** - Sensible defaults for all options

Common flags:
- `--max-iterations 10` - Maximum iterations before stopping
- `--timeout 30m` - Maximum runtime
- `--model gpt-4` - AI model to use
- `--promise "I'm special!"` - Completion phrase
- `--log-level info` - Logging verbosity
- `--streaming true` - Enable streaming responses

Run `ralph run --help` for all available options.

## Development

### Prerequisites

- Go 1.22 or later
- GitHub Copilot access
- Git

### Building

```bash
# Install dependencies
go mod download

# Build
make build

# Run tests
make test

# Run linter
make lint

# All checks (tidy, lint, test, build)
make all
```

### Project Structure

```text
copilot-ralph/
â”œâ”€â”€ cmd/ralph/              # Application entry point
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ cli/                # CLI commands (Cobra)
â”‚   â”œâ”€â”€ tui/                # Terminal UI (Bubble Tea)
â”‚   â”œâ”€â”€ core/               # Business logic
â”‚   â””â”€â”€ sdk/                # Copilot SDK wrapper
â”œâ”€â”€ pkg/version/            # Version information
â”œâ”€â”€ specs/                  # Specifications (source of truth)
â””â”€â”€ AGENTS.md               # Development guide for AI agents
```

### Development Guide

Ralph follows a **spec-driven development** approach. Before implementing features:

1. Read relevant specifications in [`specs/`](./specs/)
2. Review [`AGENTS.md`](./AGENTS.md) for architecture and patterns
3. Check [`.github/instructions/golang.md`](.github/instructions/golang.md) for Go conventions
4. Implement following the specifications
5. Write tests using table-driven test pattern
6. Run linters and tests

Key principles:

- âŒ No `else` statements (use early returns)
- âœ… Always wrap errors with `%w`
- âœ… Use table-driven tests
- âœ… Follow Model-View-Update pattern for TUI
- âœ… Document all exported symbols

## Architecture

Ralph is organized into distinct layers:

```text
CLI Layer (cmd/ralph, internal/cli)
    â”‚ Commands, flags, validation
    â†“
TUI Layer (internal/tui)
    â”‚ Terminal UI, user interaction
    â†“
Core Layer (internal/core)
    â”‚ Loop engine, business logic
    â†“
SDK Layer (internal/sdk)
    â”‚ Copilot integration
    â†“
GitHub Copilot API
```

See [AGENTS.md](./AGENTS.md) for detailed architecture documentation.

## Specifications

Detailed specifications are the source of truth for implementation:

- [CLI Specification](./specs/cli.md) - Command-line interface
- [TUI Specification](./specs/tui.md) - Terminal user interface
- [Loop Engine Specification](./specs/loop-engine.md) - Core loop logic
- [SDK Integration Specification](./specs/sdk-integration.md) - Copilot SDK

## Contributing

Contributions are welcome! Please:

1. Read [AGENTS.md](./AGENTS.md) for development guidelines
2. Follow the spec-driven development approach
3. Ensure tests pass and code is formatted
4. Submit a pull request with clear description

## License

MIT License - see [LICENSE](./LICENSE) for details

## Acknowledgments

- Inspired by the [Ralph Wiggum plugin](https://github.com/anthropics/claude-code/tree/main/plugins/ralph-wiggum) for Claude
- Built with [GitHub Copilot SDK](https://github.com/github/copilot-sdk)
- UI powered by [Charm Bracelet](https://github.com/charmbracelet) tools

## Project Status

ðŸš§ **Early Development** - Ralph is in active development. Core features are being implemented.

Current status:

- âœ… Project structure and specifications
- ðŸš§ Core loop engine (in progress)
- ðŸš§ TUI implementation (in progress)
- ðŸš§ CLI commands (in progress)
- ðŸš§ SDK integration (in progress)

See [GitHub Projects](https://github.com/JanDeDobbeleer/copilot-ralph/projects) for roadmap and progress.

## Support

- **Issues:** [GitHub Issues](https://github.com/JanDeDobbeleer/copilot-ralph/issues)
- **Discussions:** [GitHub Discussions](https://github.com/JanDeDobbeleer/copilot-ralph/discussions)
- **Documentation:** [specs/](./specs/) and [AGENTS.md](./AGENTS.md)

---

Made with â¤ï¸ by [Jan De Dobbeleer](https://github.com/JanDeDobbeleer)
